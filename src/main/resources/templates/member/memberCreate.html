<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
                <!--/* 괄호 안에 이름 바꾸면 페이지 타이틀 정해집니다! */-->
<head th:replace="~{/layout/header::headFrag('사원 등록')}"></head>
<script>

  function isImageFile(file) {
      var ext = file.name.split(".").pop().toLowerCase(); // 파일명에서 확장자를 가져온다. 
      return ($.inArray(ext, ["jpg", "jpeg", "png"]) === -1) ? false : true;  // 베열에 요소가 없을 경우 -1 반환 : false
  }
    
  function isOverSize(file) {
      var maxSize = 3 * 1024 * 1024; // 3MB로 제한 
      return (file.size > maxSize) ? true : false;
  }

  function fnPreview() {
	  $('#attachImage').on('change', function(event) {
		  
		    var file = event.target.files[0];
		    if(file) {
  		    if(isImageFile(file) == false){
  		    	alert('이미지 파일이 아닙니다.');
  		    	$('#attachImage').val('');
  		    	$('#imagePreview').attr("src", '');
  		    	return;
  		    }
  		    if(isOverSize(file) == true){
  		    	alert('첨부파일이 3MB를 초과했습니다.');
  		    	$('#attachImage').val('');
  		    	$('#imagePreview').attr("src", '');
  		    	return;
  		    }
  		    
  		    var reader = new FileReader(); 
  		    reader.onload = function(e) {
            $('#imagePreview').attr('src', e.target.result);
  		    }
  		    reader.readAsDataURL(file);
		    } else {
          $('#imagePreview').attr('src', '/images/faces/face1.jpg');
		    }

	  })
  }
  function fnCancel() {
	  $('#btnCancel').on('click', function(){
		  history.back();
	  })
  }
  $(function(){
	  fnPreview();
    fnCancel();
  })
</script>
<body>

  <div class="container-scroller">
    <!--/* 상단바 */-->
    <nav th:replace="~{/layout/common::topbarFrag}"></nav>

    <!--/* 본문영역 */-->
    <div class="container-fluid page-body-wrapper">
      <!--/* 테마설정버튼 영역 */-->
      <div th:replace="~{/layout/common::themeSettingFrag}"></div>   
      <!--/* 사이드바 영역 */-->
      <nav th:replace="~{/layout/sidebar::sidebarFrag}"></nav>
      
      <!--/* 실제 내용 영역 */-->
      <div class="main-panel">
        <div class="content-wrapper">
        
          <div class="member-main">
            <div class="member-title">
                <h3>사원 등록</h3>
            </div>
            
            <div class="formWrap">
              <form method="post" enctype="multipart/form-data" th:action="@{/member/addMember.do}">
              
                <div class="profileImage">
                  <div class="imageFile">
                    <img class="rounded-circle" th:src="@{/images/faces/face1.jpg}" alt="profileImage" id="imagePreview" width="200px" height="200px">
                  </div>
                  <div class="attachImage">
                    <input type="file" class="form-control-file" id="attachImage" name="attachImage" accept=".jpg, .png">
                  </div>
                </div>
            
                <div class="inputEmail">
                    <label for="emailId">이메일</label>
                    <input type="text" class="form-control p-input" id="emailId" name="emailId" required>
                </div>
                <div class="inputName">
                    <label for="memberName">이름</label>
                    <input type="text" class="form-control p-input" id="memberName" name="memberName" required>
                </div>
                <div class="inputTel">
                    <label for="tel">휴대폰</label>
                    <input type="text" class="form-control p-input" id="tel" name="tel" placeholder="-를 제외한 숫자만 입력해주세요">
                </div>
                <div class="inputbirth">
                    <label for="birthday">생년월일</label>
                    <input type="text" class="form-control p-input" id="birthday" name="birthday" placeholder="yyyymmdd">
                </div>
                <div class="inputDeptJob">
                    <div>부서/직위 선택</div>
                    <div>
                      <select name="deptNo" class="dept" required>
                        <option value="">부서 선택</option>
                        <option value="1">인사팀</option>
                        <option value="2">총무팀</option>
                        <option value="3">개발팀</option>
                      </select>          
                      <select name="jobNo" class="job" required>
                        <option value="">직위 선택</option>
                        <option value="6">사원</option>
                        <option value="5">대리</option>
                        <option value="4">과장</option>
                        <option value="3">차장</option>
                        <option value="2">부장</option>
                      </select>          
                    </div>
                </div>
                <div class="tempPw">
                  <div>임시 비밀번호</div>
                  <input type="text" class="form-control p-input" id="pw" name="pw" placeholder="임시 비밀번호를 입력해주세요" required> 
                </div>
                <div class="col-12">
                    <button type="submit" class="btn btn-primary" id="btnSubmit">등록하기</button>
                    <button type="button" class="btn btn-secondary" id="btnCancel">취소하기</button>
                </div>
              </form>
            </div> <!--/* formWrap 끝나는 지점 */-->
          </div> <!--/* member-main 끝나는 지점 */-->

        </div>  <!--/* content-wrapper 끝나는 지점 */-->
      </div>  <!--/* main-panel 끝나는 지점 */-->      
    </div>  <!--/* page-body-wrapper(사이드바+본문) 끝나는 지점 */-->
  </div>  <!--/* container-scroller(상단바+사이드바+본문) 끝나는 지점 */-->
  
  <!--/* footer 영역 */-->
  <footer th:replace="~{layout/footer::footerFrag}"></footer> 

</body>
</html>